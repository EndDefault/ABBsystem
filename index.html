<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>스토리보드</title>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, securityLevel: "loose" });
  </script>
  
</head>
<style>
  ul {
    display: flex;
  }
  li{
    width: 100%;
    height: 50px;
    margin-right: 100px;
    border: 1px solid black;
    text-align: center;
    font-size:x-large;
    justify-self: center; 
    line-height: 45px;
  }
</style>
<body>
  <h1>스토리보드</h1>
<div>
  <ul>
    <li><a href="./login/login.html">로그인</a></li>
    <li><a href="./lotto/lotto.html">복권</a></li>
    <li><a href="./myPage/myPage.html">마이페이지</a></li>
    <li><a href="./community/community.html">커뮤니티</a></li>
    <li><a href="./map/map.html">판매점</a></li>
    <li><a href="./ABB.png">데이터베이스</a></li>
  </ul>
  <!-- https://www.erdcloud.com/ -->
</div>
<pre class="mermaid">
flowchart TD
%%{init: {"theme":"default","flowchart":{"htmlLabels": true},"securityLevel":"loose"}}%%

subgraph 로그인[<div class="subgraph">로그인</div>]
  Login["로그인"]
  non_member(["비회원"])
  Find["ID/PW 찾기"]
  Mem["회원가입"]
  y_member(["회원"])
  non_member --> Mem --> Login
  y_member --> Login
  Login <--> Find
end

subgraph 복권["복권"]
  lotto_page["복권 구매 페이지"]
  Pay["복권결제"]
  Auto["자동 생성"]
  Passive["수동 선택"]
  Semi_auto["반자동 생성"]
  pay_fail(["결제실패"])
  lotto_page --- Auto & Passive & Semi_auto --> Pay
  Pay --- pay_fail
end

pay_success(["구매 성공"])
복권 --- no_money(["금액 부족"]) --> charging
복권 --- pay_success --> MP_1
MP_1 --> lotto_check["복권 당첨 확인"]

subgraph 마이페이지["마이페이지"]
  MP_1["구매복권이력"]
  MP_2["마일리지"]
  MP_3["충전금액"]
  MP_4["회원탈퇴"]
end
MP_3 --> charging

subgraph 커뮤니티["커뮤니티"]
  Notice["공지사항"]
  FAQ["FAQ"]
  Board["게시판"]
  mem(["회원"])
  admin(["관리자"])
  mem --> Board & FAQ
  admin --> Notice & FAQ & Board
  FAQ --> chatting["관리자와 1:1 채팅"]
  Board --> Comment["댓글"]
end

subgraph 판매점["판매점"]
  Map["판매점 지도"]
  choose["판매점 선택"]
  Map --> choose
end

Z(("시작")) --> Main["<div style='width:150px;height:70px;font-size:40px'>메인화면</div>"] --- try_login(["로그인 시도"]) --> 로그인
로그인 --- text(["로그인성공"]) --> Main
Main --> 커뮤니티 & 복권 & 마이페이지 & 판매점
Main --> Q(["로그아웃"]) 
마이페이지 --> Board

charging["충전페이지"]
    
%% 스타일 정의
classDef check fill:#C8E6C9,stroke:#2E7D32,stroke-width:1px,color:#000;
classDef col fill:#FFE0B2,font-size:20px;

%% 여러 노드에 일괄 적용
class no_money,mem,admin,pay_fail,pay_success,text,y_member,non_member,Q,Auto,Passive,Semi_auto,try_login check;
class 로그인,복권,마이페이지,커뮤니티,판매점 col;


</pre>

</body>
</html>
