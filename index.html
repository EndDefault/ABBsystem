<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>스토리보드</title>
  <!-- mermaid.js 불러오기 -->
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, securityLevel: "loose" });
  </script>
</head>
<body>
  <h1>스토리보드</h1>

  <!-- md 파일 내용 대신 여기다 옮기면 됨 -->
<pre class="mermaid">
flowchart TD
%%{init: {"theme":"default","flowchart":{"htmlLabels": true},"securityLevel":"loose"}}%%

subgraph 로그인["로그인"]
  Login["로그인"]
  non_member(["비회원"])
  Find["ID/PW 찾기"]
  Mem["회원가입"]
  y_member(["회원"])
  non_member --> Mem --> Login
  y_member --> Login
  Login <--> Find
end

subgraph 복권["복권"]
  lotto_page["복권 구매 페이지"]
  Pay["복권결제"]
  Auto["자동 생성"]
  Passive["수동 선택"]
  Semi_auto["반자동 생성"]
  pay_fail(["결제실패"])
  lotto_page --- Auto & Passive & Semi_auto --> Pay
  Pay --- pay_fail
end

pay_success(["구매 성공"])
복권 --- no_money(["금액 부족"]) --> charging
복권 --- pay_success --> MP_1
MP_1 --> lotto_check["복권 당첨 확인"]

subgraph 마이페이지["마이페이지"]
  MP_1["구매복권이력"]
  MP_2["마일리지"]
  MP_3["충전금액"]
  MP_4["회원탈퇴"]
end
MP_3 --> charging

subgraph 커뮤니티["커뮤니티"]
  Notice["공지사항"]
  FAQ["FAQ"]
  Board["게시판"]
  mem(["회원"])
  admin(["관리자"])
  mem --> Board & FAQ
  admin --> Notice & FAQ & Board
  FAQ --> chatting["관리자와 1:1 채팅"]
  Board --> Comment["댓글"]
end

subgraph 판매점["판매점"]
  Map["판매점 지도"]
  choose["판매점 선택"]
  Map --> choose
end

Z((Z)) --> Main["<div style='width:150px;height:70px;font-size:40px'>메인화면</div>"] --- try_login(["로그인 시도"]) --> 로그인
로그인 --- text(["로그인성공"]) --> Main
Main --> 커뮤니티 & 복권 & 마이페이지 & 판매점
Main --> Q(["로그아웃"]) 
마이페이지 --> Board

charging["충전페이지"]

로그인["<a href='https://enddefault.github.io/ABBsystem/index.html'/">]
    
%% 스타일 정의
classDef check fill:#C8E6C9,stroke:#2E7D32,stroke-width:1px,color:#000;
classDef col fill:#FFE0B2,font-size:30px;

%% 여러 노드에 일괄 적용
class no_money,mem,admin,pay_fail,pay_success,text,y_member,non_member,Q,Auto,Passive,Semi_auto,try_login check;
class 로그인,복권,마이페이지,커뮤니티,판매점 col;

</pre>
</body>
</html>
